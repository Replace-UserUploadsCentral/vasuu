<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creative Studio Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="chat.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .chat-container {
            height: calc(100vh - 180px);
        }
        .message {
            max-width: 80%;
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 1rem;
        }
        .user-message {
            background-color: #E3F2FD;
            margin-left: auto;
            border-bottom-right-radius: 0.25rem;
        }
        .bot-message {
            background-color: #F5F5F5;
            margin-right: auto;
            border-bottom-left-radius: 0.25rem;
        }
        /* New styles for general chat message structure,
           adjusting to Tailwind's existing utility classes for layout
           and ensuring visual consistency. */
        .message {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            max-width: 100%; /* Override previous max-width to allow full flexibility */
        }
        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1rem;
            margin-right: 10px;
            flex-shrink: 0;
        }
        .user-message .message-avatar {
            background-color: #3498db; /* Blue */
            order: 2; /* Move avatar to the right for user messages */
            margin-right: 0;
            margin-left: 10px;
        }
        .ai-message .message-avatar {
            background-color: #2ecc71; /* Green */
        }
        .message-bubble {
            padding: 10px 15px;
            border-radius: 15px;
            max-width: calc(100% - 60px); /* Account for avatar width and margin */
            word-wrap: break-word;
        }
        .user-message .message-bubble {
            background-color: #3498db; /* Blue */
            color: white;
            margin-left: auto; /* Push to right */
            border-bottom-right-radius: 2px;
        }
        .ai-message .message-bubble {
            background-color: #e0e0e0; /* Light grey */
            color: #333;
            border-bottom-left-radius: 2px;
        }
        .message-time {
            font-size: 0.75rem;
            color: #999;
            margin-top: 5px;
            width: 100%;
        }
        .user-message .message-time {
            text-align: right;
        }
        .chat-input-container {
            background-color: #f8f9fa; /* Light grey */
            padding: 15px;
            border-top: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        .chat-input-container .input-group {
            display: flex;
            margin-bottom: 10px;
        }
        .chat-input-container textarea {
            flex-grow: 1;
            border-radius: 20px;
            padding: 10px 15px;
            border: 1px solid #ddd;
            resize: none;
            overflow: hidden;
            min-height: 40px;
            max-height: 120px;
        }
        .chat-input-container .send-btn {
            background-color: #3498db; /* Blue */
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 10px;
            flex-shrink: 0;
        }
        .input-features {
            text-align: center;
            color: #7f8c8d;
        }
        .input-features span {
            margin: 0 10px;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-palette text-pink-600 text-2xl mr-3"></i>
                    <h1 class="text-xl font-semibold text-gray-900">Creative Studio Assistant</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-history"></i>
                    </button>
                    <button class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Chat Area -->
        <main class="flex-1 overflow-hidden">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="chat-messages overflow-y-auto p-4" id="chat-messages">
                    <!-- Chat messages will be dynamically loaded here -->
                </div>
            </div>
        </main>

        <!-- Chat Input Container -->
        <div class="chat-input-container bg-white border-t">
            <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8">
                <div class="input-group">
                    <textarea class="form-control" placeholder="Ask about design or creative ideas..." rows="1"></textarea>
                    <button class="btn send-btn"><i class="fas fa-paper-plane"></i></button>
                </div>
                <div class="input-features">
                    <span><i class="fas fa-microphone"></i></span>
                    <span><i class="fas fa-paperclip"></i></span>
                    <span><i class="fas fa-image"></i></span>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Get DOM elements
        const chatMessages = document.getElementById('chat-messages');
        const textarea = document.querySelector('.chat-input-container textarea');
        const sendButton = document.querySelector('.chat-input-container .send-btn');
        
        console.log('Send button:', sendButton); // Debug log

        // Function to add message to chat
        function addMessageToChat(message, isUser = false) {
            const messageElement = document.createElement('div');
            messageElement.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.innerHTML = `<i class="fas fa-${isUser ? 'user' : 'robot'}"></i>`; // Changed 'landmark' to 'robot' for AI avatar
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.innerHTML = `<p>${message}</p>`;
            
            const time = document.createElement('div');
            time.className = 'message-time';
            time.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageElement.appendChild(avatar);
            messageElement.appendChild(bubble);
            messageElement.appendChild(time);
            
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Function to handle sending messages
        async function sendMessage() {
            console.log('sendMessage function called'); // Debug log
            
            const userMessage = textarea.value.trim();
            if (!userMessage) return;

            // Display user message
            addMessageToChat(userMessage, true);
            
            // Clear input
            textarea.value = '';
            
            try {
                // Show loading state
                sendButton.disabled = true;
                sendButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                
                // Send message to server
                const response = await fetch('/query', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ question: userMessage })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Server response:', data); // Debug log
                
                // Display AI response
                addMessageToChat(data.response);
            } catch (error) {
                console.error('Error:', error);
                addMessageToChat('I apologize, but I encountered an error. Please try again.');
            } finally {
                // Reset button state
                sendButton.disabled = false;
                sendButton.innerHTML = '<i class="fas fa-paper-plane"></i>';
            }
        }

        // Event listeners
        console.log('Adding click listener to send button'); // Debug log
        sendButton.addEventListener('click', () => {
            console.log('Send button clicked'); // Debug log
            sendMessage();
        });

        textarea.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Initialize - ensure everything is loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM fully loaded');
            if (!sendButton) {
                console.error('Send button not found!');
            }
        });
    </script>
</body>
</html> 